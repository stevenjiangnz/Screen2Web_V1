<div>
    <div class="col-sm-2 left-panel">
        <div class="panel panel-primary daily-stock-filter" ng-show="!vm.dataLoading" style="margin-top: 50px">
            <div class="panel-heading">
                <h3 class="panel-title btn btn-default btn-xs">Filter</h3>
            </div>
            <div class="panel-body">
                <div class="form-group">

                    <form class="form-vertical ng-pristine ng-valid ng-valid-required" name="shareForm" style="">
                        <fieldset>
                            <div class="form-group" ng-init="search.shareType='Stock'">
                                <label class="control-label">Type</label>
                                <div>
                                    <label class="radio-inline"><input type="radio" value="Stock" name="shareType"
                                                                       ng-model="search.shareType"
                                                                       class="ng-pristine ng-untouched ng-valid ng-not-empty">Stock</label>
                                    <label class="radio-inline"><input type="radio" value="ETF" name="shareType"
                                                                       ng-model="search.shareType"
                                                                       class="ng-pristine ng-untouched ng-valid ng-not-empty">ETF</label>
                                    <label class="radio-inline"><input type="radio" value="Index" name="shareType"
                                                                       ng-model="search.shareType"
                                                                       class="ng-pristine ng-untouched ng-valid ng-not-empty">Index</label>

                                </div>
                            </div>
                            <div class="form-group">
                                <div>
                                    <input type="text"
                                           class="form-control ng-pristine ng-not-empty ng-valid ng-valid-required ng-touched"
                                           ng-model="search.symbol"
                                           ng-model-options="{debounce: 750 }"
                                           ng-minlength="2"
                                           id="shareSymbol">
                                </div>
                            </div>
                            <div class="form-group">
                                <div>
                                    <label>
                                        <input type="checkbox" ng-model="search.iscfd">CFD Only
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label">Sector
                                </label>
                                <span class="fa fa-retweet btn btn-xs pull-right text-primary"
                                      ng-click="vm.toggleSectorAll()"></span>
                                <div class="row">

                                    <span class="col-sm-6 sector-option"
                                          ng-repeat="sector in vm.stockSectorList">
                                        <span class="fa fa-caret-left" aria-hidden="true"
                                              ng-show="vm.search.stockSector[sector]"></span>
                                        <span class="sector-selector"
                                              ng-class="{'sector-selector-selected': search.stockSector[sector]}"
                                              ng-click="search.stockSector[sector]=!search.stockSector[sector]"
                                        >{{sector}}</span>
                                    </span>


                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label">Price Change</label>
                                <label class="pull-right"><input type="checkbox"
                                                                 ng-model="search.priceChangeRev"></label>
                                <div>
                                    <rzslider id="sliderPriceChange" rz-slider-model="input.priceChange"
                                              rz-slider-high="input.priceChangeHigh"
                                              rz-slider-options="slider.optionsPrice"></rzslider>
                                </div>
                                <span>{{input.priceChange}}%</span><span
                                    class="pull-right">{{input.priceChangeHigh}}%</span>
                            </div>
                            <div class="form-group">
                                <label class="control-label">Price Change Same Day</label>
                                <label class="pull-right"><input type="checkbox"
                                                                 ng-model="search.priceChangeSDRev"></label>
                                <div>
                                    <rzslider id="sliderPriceChange" rz-slider-model="input.priceChangeSD"
                                              rz-slider-high="input.priceChangeHighSD"
                                              rz-slider-options="slider.optionsPriceSD"></rzslider>
                                </div>
                                <span>{{input.priceChangeSD}}%</span><span
                                    class="pull-right">{{input.priceChangeHighSD}}%</span>
                            </div>

                            <div class="form-group" ng-init="search.priceBBRev = false">
                                <label class="control-label">Price to BB</label>
                                <label class="pull-right"><input type="checkbox" ng-model="search.priceBBRev"></label>
                                <div>
                                    <rzslider id="sliderPriceBB" rz-slider-model="input.priceBB"
                                              rz-slider-high="input.priceBBHigh"
                                              rz-slider-options="slider.optionsBB"></rzslider>
                                </div>
                                <span>{{input.priceBB}}%</span><span class="pull-right">{{input.priceBBHigh}}%</span>
                            </div>

                            <div class="form-group">
                                <label class="control-label">Price to EMA20</label>
                                <label class="pull-right"><input type="checkbox"
                                                                 ng-model="search.priceEMA20Rev"></label>
                                <div>
                                    <rzslider id="sliderPriceEMA20" rz-slider-model="input.priceEMA20"
                                              rz-slider-high="input.priceEMA20High"
                                              rz-slider-options="slider.optionsEMA20"></rzslider>
                                </div>
                                <span>{{input.priceEMA20}}%</span><span
                                    class="pull-right">{{input.priceEMA20High}}%</span>
                            </div>

                            <div class="form-group">
                                <label class="control-label">Volume Change</label>
                                <label class="pull-right"><input type="checkbox"
                                                                 ng-model="search.volumeChangeRev"></label>
                                <div>
                                    <rzslider id="sliderVolumeChange" rz-slider-model="input.volumeChange"
                                              rz-slider-high="input.volumeChangeHigh"
                                              rz-slider-options="slider.optionsVolumeChange"></rzslider>
                                </div>
                                <span>{{input.volumeChange}}%</span><span
                                    class="pull-right">{{input.volumeChangeHigh}}%</span>
                            </div>

                            <div class="form-group">
                                <label class="control-label">ADX</label>
                                <label class="pull-right"><input type="checkbox" ng-model="search.adxChangeRev"></label>
                                <div>
                                    <rzslider id="sliderAdxChange" rz-slider-model="input.adxChange"
                                              rz-slider-high="input.adxChangeHigh"
                                              rz-slider-options="slider.optionsAdxChange"></rzslider>

                                </div>
                                <span>{{input.adxChange}}</span><span
                                    class="pull-right">{{input.adxChangeHigh}}</span>
                            </div>

                            <div class="form-group">
                                <label class="control-label">MACD</label>
                                <label class="pull-right"><input type="checkbox"
                                                                 ng-model="search.macdChangeRev"></label>
                                <div>
                                    <rzslider id="sliderMacdChange" rz-slider-model="input.macdChange"
                                              rz-slider-high="input.macdChangeHigh"
                                              rz-slider-options="slider.optionsMacdChange"></rzslider>
                                </div>
                                <span>{{input.macdChange}}%</span><span
                                    class="pull-right">{{input.macdChangeHigh}}%</span>
                            </div>

                            <div>
                                <label class="control-label">Heikin Ashi</label>
                                <div>
                                    <label class="pull-left"><input type="checkbox" ng-model="search.HeikinToPositive">To
                                        Positive</label>

                                    <label class="pull-right"><input type="checkbox" ng-model="search.HeikinToNegative">To
                                        Negative</label>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </div>
            </div>

        </div>
    </div>
    <div class="col-sm-10 content-panel">
        <div>
            <div class="col-sm-8 middle-panel">
                <div>
                    <div class="row">

                        <div class="col-lg-5"><h1>Search</h1></div>
                        <div class="col-lg-7"></div>

                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading" ng-init="searchExpanded =true">
                            <span style="font-weight: bold; font-size: 1.1em">Search Criteria</span>
                            <i class="fa fa-minus-square pull-right" ng-show="searchExpanded"
                               ng-click="searchExpanded=!searchExpanded"></i>
                            <i class="fa fa-plus-square pull-right" ng-show="!searchExpanded"
                               ng-click="searchExpanded=!searchExpanded"></i>
                        </div>
                        <div class="panel-body" ng-show="searchExpanded">
                            <form class="form-inline searchForm" name="searchForm"
                                  ng-init="localSearch.searchType='Stock'">
                                <fieldset>
                                    <div style="margin-bottom: 20px">
                                        <label class="radio-inline"><input type="radio" value="Stock" name="searchType"
                                                                           ng-model="localSearch.searchType">Stock</label>
                                        <label class="radio-inline"><input type="radio" value="Watch" name="searchType"
                                                                           ng-model="localSearch.searchType">Watch</label>
                                        <label class="radio-inline"><input type="radio" value="Scan" name="searchType"
                                                                           ng-model="localSearch.searchType">Scan</label>
                                        <label class="radio-inline"><input type="radio" value="Alert" name="searchType"
                                                                           ng-model="localSearch.searchType">Alert</label>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label for="searchTradingDate">Trading Date: </label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" uib-datepicker-popup="{{format}}"
                                                   ng-model="localSearch.tradingDateObj" is-open="tradingDatePop.opened"
                                                   id="searchTradingDate"
                                                   datepicker-options="tradingDateOptions" ng-required="true"
                                                   close-text="Close"/>
                                          <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="tradingDateOpen()">
                                                <i class="glyphicon glyphicon-calendar"></i></button>
                                          </span>
                                        </div>
                                    </div>
                                    <div ng-if="localSearch.searchType=='Watch'">
                                        <div class="form-group col-sm-4">
                                            <label for="searchTradingDate">Watch List: </label>
                                            <div class="input-group">
                                                <select id="searchWatch" ng-model="localSearch.watchId"
                                                        ng-options="w.id as w.name for w in watchListByZone" required>
                                                    <option value="">Select a Watchlist</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-2">
                                            <div ng-init="localSearch.watchReverse=false"><label>
                                                <input type="checkbox" ng-model="localSearch.watchReverse"
                                                       style="margin-right:5px">Reverse</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="localSearch.searchType=='Scan'">
                                        <div class="form-group col-sm-4">
                                            <label for="searchTradingDate">Scan List: </label>
                                            <div class="input-group">
                                                <select id="searchScan" ng-model="localSearch.scanId"
                                                        ng-options="s.id as s.name for s in dailyScanList"
                                                >
                                                    <option value="">Select a scan</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-2">
                                            <div ng-init="localSearch.scanForce=false"><label>
                                                <input type="checkbox" ng-model="localSearch.scanForce"
                                                       style="margin-right:5px">Force</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6" ng-if="localSearch.searchType=='Alert'">
                                        <div ng-init="localSearch.alertForce=false">
                                            <label>
                                                <input type="checkbox" ng-model="localSearch.alertForce"
                                                       style="margin-right:5px">Force
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-12" style="margin-top:20px">
                                        <div>
                                            <button type="submit" class="btn btn-primary" ng-click="submitSearch()">
                                                Submit
                                            </button>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                            <!--{{localSearch |json}}-->
                        </div>
                    </div>
                    <div ng-show="!vm.dataLoading">

                        <div ng-show="selectedShares.length > 0">
                            <button type="submit" class="btn btn-primary" ng-click="addToWatchBatch()">
                                ({{selectedShares.length}}) Add To Watch
                            </button>
                            <button type="submit" class="btn btn-primary" ng-click="removeFromWatchBatch()">
                                ({{selectedShares.length}}) Remove From Watch
                            </button>
                        </div>
                        <div class="pull-right" style="padding-right: 20px" ng-show="vm.listDisplay.length > 0"><h4>
                            Total: {{vm.listDisplay.length}}</h4>
                        </div>
                        <div class="row daily-stock-grid" ng-show="vm.listDisplay.length > 0">

                            <table class="table table-striped table-bordered daily-stock-table">
                                <!--//http://jsfiddle.net/api/post/library/pure/-->
                                <thead>
                                <tr>
                                    <th style="width: 15px">
                                        <input type="checkbox" name="AllSelect" value="All" ng-model="selectAll">
                                    </th>
                                    <th style="width: 50px">
                                    <span class="sortable-header"
                                          ng-click="sortType = 'shareId'; sortReverse = !sortReverse">
                                        ID
                                        <span ng-show="sortType == 'shareId' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'shareId' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                    </span>
                                    </th>

                                    <th style="width: 60px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'symbol'; sortReverse = !sortReverse">
                                        Symbol
                                        <span ng-show="sortType == 'symbol' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'symbol' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                    </span>
                                    </th>
                                    <th style="width: 100px">
                                       <span class="sortable-header"
                                             ng-click="sortType = 'sector'; sortReverse = !sortReverse">
                                            Sector
                                       <span ng-show="sortType == 'sector' && !sortReverse"
                                             class="fa fa-caret-down pull-right"></span>
                                       <span ng-show="sortType == 'sector' && sortReverse"
                                             class="fa fa-caret-up pull-right"></span>
                                       </span>
                                    </th>
                                    <th style="width: 100px" ng-show="search.shareType!='Index'">
                                       <span class="sortable-header"
                                             ng-click="sortType = 'isCfd'; sortReverse = !sortReverse">
                                            CFD
                                       <span ng-show="sortType == 'isCfd' && !sortReverse"
                                             class="fa fa-caret-down pull-right"></span>
                                       <span ng-show="sortType == 'isCfd' && sortReverse"
                                             class="fa fa-caret-up pull-right"></span>
                                       </span>
                                    </th>
                                    <th style="width: 65px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'tradingDate'; sortReverse = !sortReverse">
                                        Trading Date
                                        <span ng-show="sortType == 'tradingDate' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'tradingDate' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'open'; sortReverse = !sortReverse">
                                        Open
                                        <span ng-show="sortType == 'open' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'open' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'low'; sortReverse = !sortReverse">
                                        Low
                                        <span ng-show="sortType == 'low' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'low' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'high'; sortReverse = !sortReverse">
                                        High
                                        <span ng-show="sortType == 'high' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'high' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'close'; sortReverse = !sortReverse">
                                        Close
                                        <span ng-show="sortType == 'close' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'close' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px" ng-show="search.shareType!='Index'">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'volumn'; sortReverse = !sortReverse">
                                        Vol
                                        <span ng-show="sortType == 'volumn' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'volumn' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'delt_Price'; sortReverse = !sortReverse">
                                        ~Price
                                        <span ng-show="sortType == 'delt_Price' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'delt_Price' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'delt_PriceSD'; sortReverse = !sortReverse">
                                        ~PriceSD
                                        <span ng-show="sortType == 'delt_PriceSD' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'delt_PriceSD' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'delt_Vol'; sortReverse = !sortReverse">
                                        ~Vol
                                        <span ng-show="sortType == 'delt_Vol' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'delt_Vol' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'delt_Adx'; sortReverse = !sortReverse">
                                        ~Adx
                                        <span ng-show="sortType == 'delt_Adx' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'delt_Adx' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                    <th style="width:50px">
                                         <span class="sortable-header"
                                               ng-click="sortType = 'flag_Heikin'; sortReverse = !sortReverse">
                                        ~H
                                        <span ng-show="sortType == 'flag_Heikin' && !sortReverse"
                                              class="fa fa-caret-down pull-right"></span>
                                        <span ng-show="sortType == 'flag_Heikin' && sortReverse"
                                              class="fa fa-caret-up pull-right"></span>
                                        </span>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr dir-paginate="i in vm.listDisplay | orderBy:sortType:sortReverse | itemsPerPage: 15">
                                    <td><input type="checkbox" name="AllSelect" value="All" ng-model="i.selected"
                                               ng-click="selectShare(i)"></td>
                                    <td><a ui-sref="stock({shareId:i.shareId})" target="sharechart">{{ i.shareId }}</a>
                                    </td>
                                    <td>{{ i.symbol }}</td>
                                    <td>{{ i.sector }}</td>
                                    <td ng-show="search.shareType!='Index'">{{ i.isCfd }}</td>
                                    <td>{{ i.tradingDate }}</td>
                                    <td>{{ i.open | number:2 }}</td>
                                    <td>{{ i.low | number:2}}</td>
                                    <td>{{ i.high | number:2}}</td>
                                    <td>{{ i.close | number:2}}</td>
                                    <td ng-show="search.shareType!='Index'">{{ i.volumn }}</td>
                                    <td ng-class="{'positive': i.delt_Price > 0, 'negative': i.delt_Price < 0}">{{
                                        i.delt_Price | number: 2}}%
                                    </td>
                                    <td ng-class="{'positive': i.delt_PriceSD > 0, 'negative': i.delt_PriceSD < 0}">
                                        {{
                                        i.delt_PriceSD | number: 2}}%
                                    </td>
                                    <td ng-class="{'positive': i.delt_Vol > 120, 'negative': i.delt_Vol < 80}">{{
                                        i.delt_Vol | number:2 }}%
                                    </td>
                                    <td ng-class="{'positive': i.delt_Adx > 5, 'negative': i.delt_Adx < -5}">{{
                                        i.delt_Adx | number:2 }}
                                    </td>
                                    <td>
                                        <i class="fa fa-flag" aria-hidden="true"
                                           ng-class="{'positive': i.flag_Heikin > 0, 'negative': i.flag_Heikin < -1}"
                                           ng-click="flagClicked(i)"></i>

                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <!--{{vm.indicatorList.length}}-->
                            <div class="pull-right">
                                <dir-pagination-controls></dir-pagination-controls>
                            </div>

                        </div>

                        <div class="row" ng-show="vm.listDisplay.length > 0">
                            <div class="col-sm-3">
                                <h4>Chart</h4>
                            </div>
                            <div class="col-sm-9">
                                <!--<span class="pull-right">sss</span>-->
                            </div>
                            <div class="col-sm-12">
                                <high-chart options="summaryOptions" chart="chartControl"></high-chart>
                            </div>
                        </div>


                        <div ng-show="vm.listDisplay.length == 0" style="padding: 40px 40px 40px 40px">
                            <h4>No item found.</h4>
                        </div>
                    </div>


                </div>
            </div>
            <div class="col-sm-4 right-panel">
                <stock-action current-share="currentShare" trading-date="tradingDate"></stock-action>
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="temp-add-watch.html">
        <h5>Add selected share ({{selectedShares.length}}) to the following watch list.</h5>
        <div class="form-group">
            <select class="form-control" id="addWatch" ng-model="targetWatchAdd"
                    ng-options="m.id as m.name for m in watchList">
            </select>
        </div>
        <input type="button" value="OK" ng-click="submitAddToWatchBatch(targetWatchAdd)" ng-disabled="!targetWatchAdd"/>
    </script>

    <script type="text/ng-template" id="temp-remove-watch.html">
        <h5>Remove selected share ({{selectedShares.length}}) from the following watch list.</h5>
        <div class="form-group">
            <select class="form-control" id="removeWatch" ng-model="targetWatchRemove"
                    ng-options="m.id as m.name for m in watchList">
            </select>
        </div>
        <input type="button" value="OK" ng-click="submitRemoveFromWatchBatch(targetWatchRemove)"
               ng-disabled="!targetWatchRemove"/>
    </script>

</div>